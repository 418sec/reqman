# here is an example to get credentials OAuth2
# and save it to the current environment
# to use it later


# ask the token
- POST:               /api/oauth/token
  headers:
      Content-Type:   application/json
  body:
      grant_type:     client_credentials
      client_id:      dbfa4d98-4124-4b61-a435-f69ace80f0ce
      client_secret:  caf46bde-affb-c803-8f26-0b2b751d30ab
  tests:
    - status: 422                                             # github doesn't want my authent ?? for sure ;-)
  save:               auth                                    # save response json to var "auth"


# re-use the token to access an api of the "root" host (see reqman.conf)
- POST:               /api/my_api
  headers:
      Content-Type:   application/json
      Authorization:  Bearer {{auth.token}}                   # re-use the property "token" of var "auth", as a bearer token !
  body:               mydata
